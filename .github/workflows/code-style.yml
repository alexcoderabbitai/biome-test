name: Code Style
on:
  pull_request:
    paths:
        - 'project/gh-action/**'
  push:
    branches:
        - main
    paths:
        - 'project/gh-action/**'

jobs:
    python-style:
        runs-on: ubuntu-latest
        defaults:
            run:
                working-directory: project/gh-action/python
        steps:
            - uses: actions/checkout@v4
            - uses: actions/setup-python@v4
              with:
                  python-version: '3.9'
            
            - name : Install linters
              run: |
                pip install black==23.11.0 pylint pytest

            - name: Run Black
              run: black --check . 

            - name: Run Pylint
              run: |
                PYTHONPATH=$PYTHONPATH:$(pwd) pylint --recursive=y . --fail-under=9.0
    
    js-style:
        runs-on: ubuntu-latest
        defaults:
            run:
                working-directory: project/gh-action/node
        steps:
            - uses: actions/checkout@v4
            - uses: actions/setup-node@v3
              with:
                  node-version: '18'
            
            - name: Install dependencies
              run: npm ci
            
            - name: Run ESLint
              run: npx eslint .

            - name: Run Prettier
              run: npx prettier --check .
